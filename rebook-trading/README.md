# Rebook Trading Service

<div align="center">

![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.3.13-brightgreen)
![Spring Cloud](https://img.shields.io/badge/Spring%20Cloud-2023.0.5-blue)
![Java](https://img.shields.io/badge/Java-17-orange)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-14+-336791)
![Redis](https://img.shields.io/badge/Redis-6+-DC382D)
![RabbitMQ](https://img.shields.io/badge/RabbitMQ-3.x-FF6600)
![AWS S3](https://img.shields.io/badge/AWS-S3-569A31)
![Gradle](https://img.shields.io/badge/Gradle-8.14.2-02303A)

**Rebook ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ì˜ ê±°ë˜ ê´€ë¦¬ ì„œë¹„ìŠ¤**

ì¤‘ê³  ë„ì„œ ê±°ë˜ ë“±ë¡, ê´€ë¦¬, ì°œí•˜ê¸°, ì•Œë¦¼ ë°œí–‰ì„ ë‹´ë‹¹í•˜ëŠ” í•µì‹¬ ë°±ì—”ë“œ ì„œë¹„ìŠ¤

</div>

## ğŸ“‹ ëª©ì°¨

- [í”„ë¡œì íŠ¸ ì†Œê°œ](#-í”„ë¡œì íŠ¸-ì†Œê°œ)
- [ì£¼ìš” ê¸°ëŠ¥](#-ì£¼ìš”-ê¸°ëŠ¥)
- [ê¸°ìˆ  ìŠ¤íƒ](#-ê¸°ìˆ -ìŠ¤íƒ)
- [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
- [API ë¬¸ì„œ](#-api-ë¬¸ì„œ)
- [ê°œë°œ ê°€ì´ë“œ](#-ê°œë°œ-ê°€ì´ë“œ)


## ğŸ¯ í”„ë¡œì íŠ¸ ì†Œê°œ

Rebook Trading ServiceëŠ” ì¤‘ê³  ë„ì„œ ê±°ë˜ í”Œë«í¼ì˜ í•µì‹¬ ì„œë¹„ìŠ¤ë¡œ, ì‚¬ìš©ì ê°„ ë„ì„œ ê±°ë˜ë¥¼ ê´€ë¦¬í•˜ê³  ì¡°ìœ¨í•©ë‹ˆë‹¤. Spring Boot ê¸°ë°˜ì˜ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ë¡œ êµ¬í˜„ë˜ì–´ ìˆìœ¼ë©°, ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬, ì¤‘ì•™í™”ëœ ì„¤ì • ê´€ë¦¬, ë¹„ë™ê¸° ë©”ì‹œì§•ì„ í†µí•œ í™•ì¥ ê°€ëŠ¥í•œ êµ¬ì¡°ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

### í•µì‹¬ ê°€ì¹˜

- **í™•ì¥ì„±**: ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ë¥¼ í†µí•œ ìˆ˜í‰ì  í™•ì¥
- **ì•ˆì •ì„±**: ë¶„ì‚° í™˜ê²½ì—ì„œì˜ íŠ¸ëœì­ì…˜ ê´€ë¦¬ ë° ì—ëŸ¬ ì²˜ë¦¬
- **ì„±ëŠ¥**: Redis ìºì‹± ë° ìµœì í™”ëœ ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬
- **ë³´ì•ˆ**: ì‚¬ìš©ì ê¶Œí•œ ê²€ì¦ ë° ì•ˆì „í•œ íŒŒì¼ ì €ì¥

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

### ê±°ë˜ ê´€ë¦¬
- âœ… ì¤‘ê³  ë„ì„œ ê±°ë˜ ë“±ë¡ (ì´ë¯¸ì§€ ì—…ë¡œë“œ í¬í•¨)
- âœ… ê±°ë˜ ìƒì„¸ ì¡°íšŒ ë° ëª©ë¡ ì¡°íšŒ
- âœ… ê±°ë˜ ì •ë³´ ìˆ˜ì • ë° ì‚­ì œ
- âœ… ê±°ë˜ ìƒíƒœ ê´€ë¦¬ (íŒë§¤ì¤‘, ì˜ˆì•½ì¤‘, íŒë§¤ì™„ë£Œ)
- âœ… ì†Œìœ ì ê¶Œí•œ ê²€ì¦ì„ í†µí•œ ì•ˆì „í•œ ê±°ë˜ ê´€ë¦¬

### ì°œí•˜ê¸° (ë¶ë§ˆí¬)
- âœ… ê´€ì‹¬ ê±°ë˜ ì°œí•˜ê¸°/ì°œ í•´ì œ
- âœ… ì°œí•œ ê±°ë˜ ëª©ë¡ ì¡°íšŒ
- âœ… ê±°ë˜ ì¡°íšŒ ì‹œ ì°œí•˜ê¸° ìƒíƒœ í‘œì‹œ

### ì¶”ì²œ ì‹œìŠ¤í…œ
- âœ… ì‚¬ìš©ì ë§ì¶¤ ë„ì„œ ê±°ë˜ ì¶”ì²œ
- âœ… Book Serviceì™€ ì—°ë™í•œ ê°œì¸í™” ì¶”ì²œ

### ì•Œë¦¼ ì‹œìŠ¤í…œ
- âœ… ìƒˆë¡œìš´ ê±°ë˜ ë“±ë¡ ì‹œ ì°œí•œ ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼
- âœ… ê°€ê²© ë³€ë™ ì‹œ ì°œí•œ ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼
- âœ… RabbitMQ ê¸°ë°˜ ë¹„ë™ê¸° ë©”ì‹œì§•

### í˜ì´ì§€ë„¤ì´ì…˜
- âœ… ëª¨ë“  ëª©ë¡ ì¡°íšŒ APIì— í˜ì´ì§€ë„¤ì´ì…˜ ì§€ì›
- âœ… ì»¤ìŠ¤í…€ í˜ì´ì§€ ì‘ë‹µ êµ¬ì¡°

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### ë°±ì—”ë“œ í”„ë ˆì„ì›Œí¬
- **Spring Boot** 3.3.13
- **Java** 17
- **Spring Data JPA** - ORM ë° ë°ì´í„° ì ‘ê·¼
- **Spring Cloud** - ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì¸í”„ë¼

### ë°ì´í„°ë² ì´ìŠ¤ & ìºì‹±
- **PostgreSQL** - ë©”ì¸ ë°ì´í„°ë² ì´ìŠ¤
- **Redis** - ë¶„ì‚° ìºì‹±

### ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì¸í”„ë¼
- **Eureka** - ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬
- **Spring Cloud Config** - ì¤‘ì•™í™”ëœ ì„¤ì • ê´€ë¦¬
- **OpenFeign** - ì„ ì–¸ì  HTTP í´ë¼ì´ì–¸íŠ¸

### ë©”ì‹œì§•
- **RabbitMQ** - ë¹„ë™ê¸° ë©”ì‹œì§• ë° ì´ë²¤íŠ¸ ë°œí–‰
- **AMQP** - ë©”ì‹œì§€ í”„ë¡œí† ì½œ

### í´ë¼ìš°ë“œ & ìŠ¤í† ë¦¬ì§€
- **AWS S3** - ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ì†Œ

### ëª¨ë‹ˆí„°ë§ & ë¡œê¹…
- **Spring Actuator** - í—¬ìŠ¤ì²´í¬ ë° ë©”íŠ¸ë¦­
- **Prometheus** - ë©”íŠ¸ë¦­ ìˆ˜ì§‘
- **Sentry** - ì—ëŸ¬ íŠ¸ë˜í‚¹ ë° ëª¨ë‹ˆí„°ë§
- **SLF4J & Logback** - ë¡œê¹…

### API ë¬¸ì„œí™”
- **SpringDoc OpenAPI 3** - Swagger UI ê¸°ë°˜ API ë¬¸ì„œ

### ë¹Œë“œ & ë°°í¬
- **Gradle** 8.14.2
- **Docker** - ì»¨í…Œì´ë„ˆí™”
- **Jacoco** - ì½”ë“œ ì»¤ë²„ë¦¬ì§€

## ğŸ— ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API Gateway    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚              â”‚              â”‚              â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
    â”‚ Trading â”‚    â”‚  Book   â”‚   â”‚  User   â”‚    â”‚ Notif.  â”‚
    â”‚ Service â”‚â—„â”€â”€â”€â”¤ Service â”‚   â”‚ Service â”‚    â”‚ Service â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â–²â”€â”€â”€â”€â”˜
         â”‚                                            â”‚
         â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  RabbitMQ    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚        Infrastructure Services              â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  Eureka  â”‚  Config Server  â”‚  PostgreSQL   â”‚
    â”‚  Redis   â”‚  AWS S3         â”‚  Prometheus   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì„œë¹„ìŠ¤ í†µì‹  íŒ¨í„´

1. **ë™ê¸° í†µì‹  (OpenFeign)**
   - Book Service í˜¸ì¶œ: ë„ì„œ ì¶”ì²œ ëª©ë¡ ì¡°íšŒ

2. **ë¹„ë™ê¸° í†µì‹  (RabbitMQ)**
   - Notification Service ë°œí–‰: ê±°ë˜ ìƒì„±/ê°€ê²© ë³€ë™ ì•Œë¦¼

3. **ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ (Eureka)**
   - ëª¨ë“  ì„œë¹„ìŠ¤ê°€ Eurekaì— ë“±ë¡
   - ë™ì  ì„œë¹„ìŠ¤ íƒìƒ‰ ë° ë¡œë“œ ë°¸ëŸ°ì‹±

### ê³„ì¸µ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Controller Layer                 â”‚  â† REST API ì—”ë“œí¬ì¸íŠ¸
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         Service Layer                    â”‚  â† ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Trading   â”‚  Trading    â”‚  S3     â”‚ â”‚
â”‚  â”‚  Service   â”‚  Reader     â”‚ Service â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         Repository Layer                 â”‚  â† ë°ì´í„° ì ‘ê·¼
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         Entity Layer                     â”‚  â† ë„ë©”ì¸ ëª¨ë¸
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```



## ğŸ“– API ë¬¸ì„œ

ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ í›„ Swagger UIë¥¼ í†µí•´ API ë¬¸ì„œë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```
http://localhost:8080/swagger-ui.html
```

### ì£¼ìš” API ì—”ë“œí¬ì¸íŠ¸

#### ê±°ë˜ ê´€ë¦¬

| Method | Endpoint | Description | Auth |
|--------|----------|-------------|------|
| POST | `/api/tradings` | ê±°ë˜ ë“±ë¡ | Required |
| GET | `/api/tradings/{tradingId}` | ê±°ë˜ ìƒì„¸ ì¡°íšŒ | Required |
| PUT | `/api/tradings/{tradingId}` | ê±°ë˜ ìˆ˜ì • | Required (Owner) |
| PATCH | `/api/tradings/{tradingId}` | ê±°ë˜ ìƒíƒœ ìˆ˜ì • | Required (Owner) |
| DELETE | `/api/tradings/{tradingId}` | ê±°ë˜ ì‚­ì œ | Required (Owner) |
| GET | `/api/tradings/me` | ë‚´ ê±°ë˜ ëª©ë¡ ì¡°íšŒ | Required |
| GET | `/api/tradings/books/{bookId}` | íŠ¹ì • ë„ì„œ ê±°ë˜ ëª©ë¡ | Required |
| GET | `/api/tradings/recommendations` | ì¶”ì²œ ê±°ë˜ ëª©ë¡ | Required |
| GET | `/api/tradings/others/{userId}` | íƒ€ì¸ì˜ ê±°ë˜ ëª©ë¡ | Required |

#### ì°œí•˜ê¸° ê´€ë¦¬

| Method | Endpoint | Description | Auth |
|--------|----------|-------------|------|
| POST | `/api/tradings/mark/{tradingId}` | ê±°ë˜ ì°œí•˜ê¸°/ì·¨ì†Œ (í† ê¸€) | Required |
| GET | `/api/tradings/marked` | ì°œí•œ ê±°ë˜ ëª©ë¡ ì¡°íšŒ | Required |

---

## ğŸ‘¨â€ğŸ’» ê°œë°œ ê°€ì´ë“œ

### í”„ë¡œì íŠ¸ êµ¬ì¡°

```
src/main/java/com/example/rebooktradingservice/
â”œâ”€â”€ advice/              # ì „ì—­ ì˜ˆì™¸ ì²˜ë¦¬
â”‚   â””â”€â”€ GlobalExceptionHandler.java
â”œâ”€â”€ common/              # ê³µí†µ ì‘ë‹µ ëª¨ë¸
â”‚   â”œâ”€â”€ CommonResult.java
â”‚   â”œâ”€â”€ SingleResult.java
â”‚   â”œâ”€â”€ ListResult.java
â”‚   â”œâ”€â”€ PageResponse.java
â”‚   â”œâ”€â”€ ResponseService.java
â”‚   â””â”€â”€ ResultCode.java
â”œâ”€â”€ config/              # ì„¤ì • í´ë˜ìŠ¤
â”‚   â”œâ”€â”€ RabbitConfig.java
â”‚   â””â”€â”€ S3Config.java
â”œâ”€â”€ controller/          # REST ì»¨íŠ¸ë¡¤ëŸ¬
â”‚   â”œâ”€â”€ TradingController.java
â”‚   â””â”€â”€ TradingUserController.java
â”œâ”€â”€ enums/               # ì—´ê±°í˜•
â”‚   â””â”€â”€ State.java
â”œâ”€â”€ exception/           # ì»¤ìŠ¤í…€ ì˜ˆì™¸
â”‚   â”œâ”€â”€ CMissingDataException.java
â”‚   â”œâ”€â”€ CDuplicatedDataException.java
â”‚   â”œâ”€â”€ CUnauthorizedException.java
â”‚   â””â”€â”€ CInvalidDataException.java
â”œâ”€â”€ feigns/              # Feign í´ë¼ì´ì–¸íŠ¸
â”‚   â””â”€â”€ BookClient.java
â”œâ”€â”€ model/               # DTO ë° ì—”í‹°í‹°
â”‚   â”œâ”€â”€ entity/
â”‚   â”‚   â”œâ”€â”€ Trading.java
â”‚   â”‚   â”œâ”€â”€ TradingUser.java
â”‚   â”‚   â””â”€â”€ compositekey/
â”‚   â”‚       â””â”€â”€ TradingUserId.java
â”‚   â”œâ”€â”€ message/
â”‚   â”‚   â””â”€â”€ NotificationTradeMessage.java
â”‚   â”œâ”€â”€ TradingRequest.java
â”‚   â””â”€â”€ TradingResponse.java
â”œâ”€â”€ repository/          # JPA ë¦¬í¬ì§€í† ë¦¬
â”‚   â”œâ”€â”€ TradingRepository.java
â”‚   â””â”€â”€ TradingUserRepository.java
â”œâ”€â”€ service/             # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”œâ”€â”€ TradingService.java
â”‚   â”œâ”€â”€ TradingReader.java
â”‚   â”œâ”€â”€ TradingUserService.java
â”‚   â”œâ”€â”€ S3Service.java
â”‚   â””â”€â”€ NotificationPublisher.java
â””â”€â”€ RebookTradingServiceApplication.java
```